---
import BaseHead from '../components/BaseHead.astro';
import VideoHeader from '../components/VideoHeader.astro';
import StickyMenu from '../components/StickyMenu.astro';
import Carousel from '../components/Carousel.astro';
import InfoSection from '../components/sections/InfoSection.astro';
import MainFooter from '../components/MainFooter.astro';
import SponsorGrid from '../components/sponsors/SponsorGrid.astro';
import SectionTitle from '../components/SectionTitle.astro';
import NewsSection from '../components/news/NewsSection.astro';

const { title, description } = Astro.props;

//Images
import carousel1 from '../assets/imgCarruselMainPage/carrusel1.jpg';
import carousel2 from '../assets/imgCarruselMainPage/carrusel2.jpg';
import carousel3 from '../assets/imgCarruselMainPage/carrusel3.jpg';
import carousel4 from '../assets/imgCarruselMainPage/carrusel4.jpg';
import carousel5 from '../assets/imgCarruselMainPage/carrusel5.jpg';

// Importación del tipo Sponsor
import type { Sponsor } from '../components/sponsors/SponsorGrid.astro';

// Definición de patrocinadores
const sponsors: Sponsor[] = [
  {
    name: 'Ayuntamiento de Villamanin',
    logo: '/images/sponsors/villamanin.jpg',
    url: '#',
  },
  {
    name: 'Diputación de León',
    logo: '/images/sponsors/dipu.jpg',
    url: '#',
  },
  {
    name: 'Deportes Castilla y León',
    logo: '/images/sponsors/deportes.png',
    url: '#',
  },
  {
    name: 'Banco Regional',
    logo: '/images/sponsors/banco.png',
    url: '#',
  },
  {
    name: 'Aseguradora Deportiva',
    logo: '/images/sponsors/aseguradora.png',
    url: '#',
  },
  {
    name: 'Tienda de Deportes',
    logo: '/images/sponsors/tienda-deportes.png',
    url: '#',
  },
  {
    name: 'Hotel Rural Valle de Arbas',
    logo: '/images/sponsors/hotel.png',
    url: '#',
  },
  {
    name: 'Restaurante El Montañés',
    logo: '/images/sponsors/restaurante.png',
    url: '#',
  },
  {
    name: 'Agua de Manantial',
    logo: '/images/sponsors/agua.png',
    url: '#',
  },
  {
    name: 'Bebidas Energéticas',
    logo: '/images/sponsors/bebidas.png',
    url: '#',
  },
  {
    name: 'Transportes Locales',
    logo: '/images/sponsors/transporte.png',
    url: '#',
  },
  {
    name: 'Servicio Técnico',
    logo: '/images/sponsors/tecnico.png',
    url: '#',
  },
];
---

<html lang="es">
  <BaseHead title={title} description={description} />

  <body>
    <StickyMenu class="stiky" />
    <VideoHeader
      src="/videoTrail2024.mp4"
      poster="/frameTrail2024.png"
      title="Trail Valle de Arbas 2025"
    />
    <main class="max-w-300 mx-auto">
      <div class="fade-in-up">
        <h2 class="text-3xl font-bold text-center mt-10 mb-4 animate-title">
          Descubre el <span class="text-gradient">Valle de Arbas</span>
        </h2>
        <p class="text-center text-base mb-8 w-[90%] mx-auto animate-text">
          Bienvenido al Valle de Arbas, donde el 22 y el 23 de Mayo se celebrará la tercera edición de la
          carrera <span class="text-gradient font-bold">TRAIL VALLE DE ARBAS</span>. Como puedes ver
          en las fotos se trata de un valle que no deja indiferente a nadie.
        </p>
      </div>

      <div class="reveal-element">
        <Carousel
          images={[
            {
              src: carousel4,
              alt: 'Imagen de la vista de las tres Marías',
              caption: 'Refugio de Las Tres Marías ',
            },
            {
              src: carousel5,
              alt: 'Valle de Arbas nevado',
              caption: 'Valle de Arbas nevado',
            },
            { src: carousel1, alt: 'Imagen de subida al Palero', caption: 'Subida al Palero' },
            {
              src: carousel2,
              alt: 'llegada al Palero',
              caption: 'Collado de la llegada al Palero',
            },
            {
              src: carousel3,
              alt: 'Imagen de la vista desde la cresta de la Brazosa',
              caption: 'Cresta de la Brazosa',
            },
            
          ]}
        />
      </div>

      <NewsSection className="py-16 bg-gray-50" />

      <SectionTitle
          title="¿Por qué participar?"
          subtitle="Descubre las razones para unirte al Trail Valle de Arbas"
          className="mb-6 reveal-element"
        />
      <section class="grid grid-cols-1 md:grid-cols-2 gap-4 p-4">

        <InfoSection
          title="Multiples categorías"
          description="Hemos preparado varias pruebas en el trail para que puedas elegir la que más se adapte a ti."
          cardTitle="2 Distancias y una para cadetes e infantiles"
          cardDescription="Desde 5'5km hasta 23km, para todos los niveles."
          cardIcon="M4 4v15a1 1 0 0 0 1 1h15M8 16l2.5-5.5 3 3L17.273 7 20 9.667"
          cardLink="/info#carrera-montana"
        />

        <InfoSection
          title="Seguridad"
          description="Con el fin de que la carrera se desarrolle de forma segura y exitosa, es importante que leas las normas y recomendaciones."
          cardTitle="Normativa"
          cardDescription="Comprueba el material y las recomendaciones"
          cardIcon="M12 6.03v13m0-13c-2.819-.831-4.715-1.076-8.029-1.023A.99.99 0 0 0 3 6v11c0 .563.466 1.014 1.03 1.007 3.122-.043 5.018.212 7.97 1.023m0-13c2.819-.831 4.715-1.076 8.029-1.023A.99.99 0 0 1 21 6v11c0 .563-.466 1.014-1.03 1.007-3.122-.043-5.018.212-7.97 1.023"
          cardLink="/info#normativa"
        />

        <InfoSection
          title="Ubicaciones"
          description="Consulta los puntos de interés y las ubicaciones clave del evento."
          cardTitle="Mapa"
          cardDescription="Explora el mapa del evento"
          cardIcon="M11.906 1.994a8.002 8.002 0 0 1 8.09 8.421 7.996 7.996 0 0 1-1.297 3.957.996.996 0 0 1-.133.204l-.108.129c-.178.243-.37.477-.573.699l-5.112 6.224a1 1 0 0 1-1.545 0L5.982 15.26l-.002-.002a18.146 18.146 0 0 1-.309-.38l-.133-.163a.999.999 0 0 1-.13-.202 7.995 7.995 0 0 1 6.498-12.518ZM15 9.997a3 3 0 1 1-5.999 0 3 3 0 0 1 5.999 0Z"
          cardLink="/info#ubicaciones"
        />

        <InfoSection
          title="Resultados"
          description="Puedes ver los resultados y fotos de la carrera y otras ediciones."
          cardTitle="Galería"
          cardDescription="Consulta los resultados"
          cardIcon="M4 18V8a1 1 0 0 1 1-1h1.5l1.707-1.707A1 1 0 0 1 8.914 5h6.172a1 1 0 0 1 .707.293L17.5 7H19a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1Z M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
          cardLink="/info#resultados"
        />

        <InfoSection
          title="Inscripción"
          description="Estate pendiente a las inscriciones, son limitadas. No te quedes sin tu dorsal."
          cardTitle="Inscríbete"
          cardDescription="Asegura tu plaza en la carrera"
          cardIcon="M8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4H6Zm7.25-2.095c.478-.86.75-1.85.75-2.905a5.973 5.973 0 0 0-.75-2.906 4 4 0 1 1 0 5.811ZM15.466 20c.34-.588.535-1.271.535-2v-1a5.978 5.978 0 0 0-1.528-4H18a4 4 0 0 1 4 4v1a2 2 0 0 1-2 2h-4.535Z"
          cardLink="/inscripcion"
        />

        <InfoSection
          title="Otras actividades"
          description="Además de la carrera, podrás disfrutar de diversas actividades en el valle."
          cardTitle="Actividades"
          cardDescription="Consulta las actividades programadas"
          cardIcon="M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Zm3-7h.01v.01H8V13Zm4 0h.01v.01H12V13Zm4 0h.01v.01H16V13Zm-8 4h.01v.01H8V17Zm4 0h.01v.01H12V17Zm4 0h.01v.01H16V17Z"
          cardLink="/info#actividades"
        />
      </section>

      <div class="fade-in-up delayed-animation">
        <h2 class="text-3xl font-bold text-center mt-10 mb-4 pulse-animation">
          ¡No te lo pierdas!
        </h2>
        <p class="text-center text-base mb-8 w-[90%] mx-auto">
          El Trail Valle de Arbas es una experiencia única que combina deporte, naturaleza y
          comunidad. ¡Te esperamos el de 22 y 23 Mayo para disfrutar juntos de este evento inolvidable!
        </p>
      </div>

      <section
        id="sponsors"
        class="sponsors-section py-16 mt-8 bg-linear-to-b from-white to-gray-50"
      >
        <SectionTitle
          title="Nuestros patrocinadores"
          subtitle="Agradecemos a nuestros patrocinadores por su apoyo en la realización de este evento. Esta carrera no sería posible sin ellos."
          className="mb-12 reveal-element"
        />

        <div class="sponsor-grid-container reveal-element">
          <SponsorGrid sponsors={sponsors} />
        </div>
        <div
          class="become-sponsor text-center mt-16 bg-white py-10 px-6 rounded-lg shadow-sm max-w-225 mx-auto reveal-element"
        >
          <h3 class="text-2xl font-semibold mb-4">¿Te gustaría ser patrocinador?</h3>
          <p class="text-base w-[90%] mx-auto max-w-150 mb-6">
            Si tu empresa está interesada en patrocinar el Trail Valle de Arbas, no dudes en
            contactarnos. Tenemos diferentes opciones de patrocinio adaptadas a tus necesidades.
          </p>
          <a
            href="/contacto"
            class="btn-animated inline-block px-8 py-3 bg-linear-to-r from-[#f97316] to-[#e49a69] text-white font-semibold rounded-lg transition-all hover:shadow-lg hover:-translate-y-1 hover:from-[#e49a69] hover:to-[#f97316]"
          >
            Contacta con nosotros
          </a>
        </div>
      </section>
    </main>
    <div class="page-transition"></div>
    <footer>
      <MainFooter />
    </footer>

    <script>
      import {
        initScrollAnimations,
        initButtonEffects,
        initPageTransitions,
        initHoverEffects,
        initTextAnimations,
        initCounterAnimations,
        initUnderlineAnimations,
      } from '../scripts/animations.js';

      document.addEventListener('DOMContentLoaded', () => {
        // Marcar que JavaScript está habilitado
        document.body.classList.add('js-enabled');

        // Inicializar todas las animaciones
        try {
          initPageTransitions();
          initScrollAnimations();
          initButtonEffects();
          initHoverEffects();
          initTextAnimations();
          initCounterAnimations();
          initUnderlineAnimations();
        } catch (error) {
          console.error('Error al inicializar animaciones:', error);
        }
      });
    </script>
  </body>
</html>

<style>
  .stiky {
    position: sticky;
    top: 0;
    z-index: 50;
  }

  .text-gradient {
    background: linear-gradient(270deg, #f96742, #e49a69, #f96742);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradient-move 6s linear infinite;
  }

  /* Animación de entrada desde abajo */
  .fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 1s ease forwards;
  }

  .delayed-animation {
    animation-delay: 0.3s;
  }

  /* Animación de título */
  .animate-title {
    animation:
      fadeIn 0.8s ease-out forwards,
      scaleIn 0.8s ease-out forwards;
  }

  .animate-text {
    animation: fadeIn 1s ease-out 0.3s forwards;
    opacity: 0;
  }

  /* Animación de revelación en scroll */
  .reveal-element {
    opacity: 0;
    transform: translateY(40px);
    transition:
      opacity 0.8s ease,
      transform 0.8s ease;
  }

  .reveal-element.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Elementos dentro de secciones con scroll-reveal */
  .scroll-reveal-section > * {
    opacity: 1; /* Por defecto visible */
    transform: none; /* Por defecto sin transformación */
    transition:
      opacity 0.8s ease,
      transform 0.8s ease;
  }

  /* Solo aplicar estas propiedades si el JavaScript está funcionando */
  .js-enabled .scroll-reveal-section > * {
    opacity: 0;
    transform: translateY(30px);
  }

  .scroll-reveal-section > *.visible {
    opacity: 1 !important;
    transform: translateY(0) !important;
  } /* Efecto pulsante para llamadas a la acción */
  .pulse-animation {
    animation: pulse 2s infinite;
  }

  /* Animación para botones */
  .btn-animated {
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .btn-animated:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: all 0.6s;
  }

  .btn-animated:hover:before {
    left: 100%;
  }

  /* Animación de línea deslizante */
  .slide-in-animation {
    width: 0;
    animation: slideWidth 1.2s ease-out 0.3s forwards;
  }

  /* Transición entre páginas */
  .page-transition {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white;
    z-index: 9999;
    opacity: 1;
    pointer-events: none;
    transition: opacity 0.6s ease;
  }

  .page-transition.loaded {
    opacity: 0;
  }

  /* Keyframes para animaciones */
  @keyframes gradient-move {
    0% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 200% 50%;
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes scaleIn {
    from {
      transform: scale(0.95);
    }
    to {
      transform: scale(1);
    }
  }

  @keyframes pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
    100% {
      transform: scale(1);
    }
  }

  @keyframes slideWidth {
    from {
      width: 0;
    }
    to {
      width: 6rem;
    }
  }
</style>
