---
import RoundedInfoField from "./fields/RoundedInfoField.astro";

// Props: src (ruta del video), title, description, poster (frame inicial)
const { src, title, description, poster } = Astro.props;
---

<div class="header-video-container w-[100%] h-[60vh]">
  <video autoplay loop muted playsinline class="header-video" poster={poster}>
    <source src={src} type="video/mp4" />
    Tu navegador no soporta el vídeo.
  </video>
  <div class="header-content">
    <section
      class="header-top flex items-center justify-between px-4 py-4 w-full"
    >
      <div class="flex items-center gap-3 ml-2">
        <img
          src="/ms-icon-144x144.png"
          alt="Logo Valle de Arbas"
          class="h-12 w-12 object-contain"
        />
        <span class="font-bold text-2xl text-white">Valle de Arbas</span>
      </div>
      <nav class="header-menu">
        <input type="checkbox" id="menu-toggle" class="hidden peer" />
        <label
          for="menu-toggle"
          class="block md:hidden cursor-pointer text-white p-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-8 w-8"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path></svg
          >
        </label>
        <ul
          class="menu-list flex-col md:flex-row md:flex hidden md:visible peer-checked:flex bg-black/70 md:bg-transparent absolute md:static right-0 top-16 md:top-0 w-48 md:w-auto rounded md:rounded-none shadow-md md:shadow-none"
        >
          <li>
            <a href="/" class="block px-4 py-2 text-white hover:bg-white/10"
              >Inicio</a>
          </li>
          <li>
            <a href="/info" class="block px-4 py-2 text-white hover:bg-white/10"
              >Información</a>
          </li>
          <li>
            <a
              href="/inscripcion"
              class="block px-4 py-2 text-white hover:bg-white/10"
              >Inscripción</a>
          </li>
          <li>
            <a
              href="/contacto"
              class="block px-4 py-2 text-white hover:bg-white/10">Contacto</a>
          </li>
        </ul>
      </nav>
    </section>
    <div class="flex justify-center mb-4">
      <h1 class="text-4xl text-center font-extrabold mt-8 w-[80%]">{title}</h1>
    </div>
    <div class="flex flex-row gap-2 justify-center">
      <RoundedInfoField
        text="9-10 Mayo 2025"
        icon="/icons/calendar.svg"
      />
    </div>
  </div>
</div>

<style>
  .header-video-container {
    position: relative;
    overflow: hidden;
  }

  .header-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
  }

  .header-content {
    position: relative;
    z-index: 2;
    color: #fff;
    width: 100%;
  }

  .header-top {
    position: relative;
    z-index: 3;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1rem;
    background: transparent;
  }

  .header-menu {
    position: relative;
    z-index: 4;
  }
  .menu-list {
    position: absolute;
    right: 0;
    top: 2.5rem;
    background: rgba(0, 0, 0, 0.7);
    border-radius: 0.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    min-width: 12rem;
    display: none;
  }
  #menu-toggle:checked ~ .menu-list {
    display: flex;
  }
  @media (min-width: 768px) {
    .menu-list {
      position: static;
      background: transparent;
      box-shadow: none;
      border-radius: 0;
      min-width: 0;
      flex-direction: row;
      display: flex !important;
    }
    .header-menu label {
      display: none;
    }
  }
</style>
